<div class="food-item">
    <h2>{{'ADMIN.FOOD_ITEMS' | translate}}</h2>
    <div class="header">
        <button pButton [label]="'ADMIN.ADD_ITEM' | translate" icon="pi pi-plus" (click)="openNew()"></button>
    </div>
</div>

<p-table [value]="foodItems" [responsive]="true" dataKey="id" [paginator]="true" [rows]="5">
    <ng-template pTemplate="header">
        <tr>
            <th>{{'ADMIN.FOOD_NAME' | translate}}</th>
            <th>{{'ADMIN.IMAGE' | translate}}</th>
            <th>{{'ADMIN.PRICE_RS'| translate}}</th>
            <th>{{'ADMIN.FOOD_ACTIONS'| translate}}</th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-item>
        <tr>
            <td>{{item.name}}</td>
            <td>
                <img *ngIf="item.imageUrl"
                    [src]="item.imageUrl.startsWith('http') ? item.imageUrl : foodItemService.imageBaseUrl + item.imageUrl"
                    width="100" height="100" />
            </td>
            <td>{{item.price}}</td>
            <td>
                <button pButton icon="pi pi-pencil" (click)="editItem(item)" class="p-button-text"></button>
                <button pButton icon="pi pi-trash" (click)="deletedItem(item.id)" class="p-button-danger"></button>
            </td>
        </tr>
    </ng-template>
</p-table>

<p-dialog [header]="'ADMIN.FOOD_ITEMS' | translate" [(visible)]="dialogVisible" [modal]="true" [responsive]="true">
    <form [formGroup]="form" (ngSubmit)="saveItem()">
        <div class="p-fluid">
            <div class="p-field">
                <label for="name">{{'ADMIN.FOOD_NAME' | translate}}</label>
                <input pInputText formControlName="name" id="name" />
            </div>


            <div class="p-field">
                <label for="price">{{'ADMIN.PRICE' | translate}}</label>
                <input type="number" pInputText formControlName="price" id="price" />
            </div>


            <div class="p-field">
                <label for="image">{{'ADMIN.IMAGE' | translate}}</label>
                <input type="file" (change)="onFileSelect($event)" />
                <img *ngIf="imagePreview" [src]="imagePreview" [alt]="'ADMIN.PREVIEW'" width="50px" height="50px" />

            </div>

        </div>

        <p-footer>
            <button pButton type="submit" [label]="'ADMIN.FOOD_SAVE' | translate" ></button>
        </p-footer>
    </form>
</p-dialog>